@model ResultFeatureDto
@*
    _DefaultFeatureComponentPartial
*@
@{
    // Eğer normal watch linki geldiyse embed formatına çevir
    var videoUrl = Model.VideoUrl?.Replace("watch?v=", "embed/");
}
<section style="padding-top: 7rem; position: relative;">
    <!-- Arka plan resmi -->
    <div class="bg-holder"
         style="background-image:url('@Model.ImageUrl');
                background-size: cover;
                background-position: center;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
                z-index: -1;">
    </div>

    <div class="container">
        <div class="row align-items-center text-white">
            <!-- Sağ: Feature yazıları -->
            <div class="col-md-7 col-lg-6 text-md-start text-center py-6">
                <h4 class="fw-bold text-danger mb-3">@Model.Title</h4>
                <h1 class="hero-title text-dark">@Model.MainTitle</h1>
                <h3 class="mb-4 fw-medium text-dark">@Html.Raw(Model.Description)</h3>

                @if (!string.IsNullOrEmpty(Model.VideoUrl))
                {
                    <div class="text-center text-md-start">
                        <a href="#!" role="button" data-bs-toggle="modal" data-bs-target="#popupVideo">
                            <span class="btn btn-danger round-btn-lg rounded-circle me-3 danger-btn-shadow">
                                <img src="/public/assets/img/hero/play.svg" width="15" alt="play" />
                            </span>
                        </a>
                        <span class="fw-medium">Tanıtım Videosu</span>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="popupVideo" tabindex="-1" aria-labelledby="popupVideoLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="ratio ratio-16x9">
                                    <iframe id="videoFrame" width="560" height="315"
                                            src="https://www.youtube.com/embed/s3G2kLruJJo"
                                            title="YouTube video player" frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen>
                                    </iframe>

                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>
<script>
    var videoModal = document.getElementById('popupVideo');
    var videoFrame = document.getElementById('videoFrame');

    videoModal.addEventListener('hidden.bs.modal', function () {
        // src değerini sıfırla (video durur)
        videoFrame.src = videoFrame.src;
    });
</script>

